(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{275:function(e,t,a){"use strict";a.r(t);var s=a(2),r=a.n(s);function i(e,t,a,s,r,i,n){try{var c=e[i](n),o=c.value}catch(e){return void a(e)}c.done?t(o):Promise.resolve(o).then(s,r)}function n(e){return function(){var t=this,a=arguments;return new Promise((function(s,r){var n=e.apply(t,a);function c(e){i(n,s,r,c,o,"next",e)}function o(e){i(n,s,r,c,o,"throw",e)}c(void 0)}))}}var c={components:{},props:["search","uuid","userData","dash"],data:function(){return{busy:!1,images:[],imagesArray:[],dialog:!1,indexImage:0}},mounted:function(){switch(this.search){case"allUser":this.getImages();break;case"publication":this.getImagesPublication()}},watch:{images:function(e){this.imagesArray=_.map(e,"path")},uuid:function(e){switch(this.search){case"allUser":this.getImages();break;case"publication":this.getImagesPublication()}}},computed:{},methods:{openCarousel:function(e){this.indexImage=e,this.dialog=!0},redirectWhatsapp:function(e){window.open("https://api.whatsapp.com/send?phone="+e+"&text=Hola,%20vi%20tu%20anuncio%20en%20www.divinasprepagos.com,%20quisiera%20conocerte!","_blank")},getImagesPublication:function(){var e=this;return n(r.a.mark((function t(){var a,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.uuid){t.next=14;break}return e.busy=!0,a="/api/images/publication/"+e.uuid,t.prev=3,t.next=6,axios.get(a);case 6:s=t.sent,e.images=s.data,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),ErrorHandler.render(t.t0);case 13:e.busy=!1;case 14:case"end":return t.stop()}}),t,null,[[3,10]])})))()},getImages:function(){var e=this;return n(r.a.mark((function t(){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.busy=!0,"/api/images",t.prev=2,t.next=5,axios.get("/api/images");case 5:a=t.sent,e.images=a.data,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),ErrorHandler.render(t.t0);case 12:e.busy=!1;case 13:case"end":return t.stop()}}),t,null,[[2,9]])})))()},destroy:function(e){var t=this;return n(r.a.mark((function a(){var s,i;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.busy=!0,s="/api/destroy/images/"+e,a.prev=2,a.next=5,axios.get(s);case 5:a.sent,i=_.findIndex(t.images,{uuid:e}),t.images.splice(i,1),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(2),ErrorHandler.render(a.t0);case 13:t.busy=!1;case 14:case"end":return a.stop()}}),a,null,[[2,10]])})))()}}},o=a(1),u=Object(o.a)(c,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",{attrs:{justify:"center"}},[e.busy?a("v-col",{attrs:{cols:"12",sm:"8",md:"6"}},[a("v-progress-linear",{attrs:{indeterminate:"",color:"primary"}})],1):e._e(),e._v(" "),e.images.length>=1?a("v-col",{attrs:{cols:"12"}},[a("v-row",{attrs:{justify:"center"}},e._l(e.images,(function(t,s){return a("v-col",{key:s,attrs:{cols:"6",sm:"4",md:"3",lg:"2"}},[a("v-card",{staticClass:"portrait",attrs:{img:"/uploads/images/"+t.path,height:"150"},on:{click:function(t){return e.openCarousel(s)}}}),e._v(" "),null!=e.user&&e.user.id==t.user_id?a("v-btn",{staticClass:"my-4",attrs:{small:"",color:"primary",disabled:e.busy,block:""},on:{click:function(a){return e.destroy(t.uuid)}}},[e._v("\n                        Eliminar\n                        "),a("v-icon",{staticClass:"material-icons",attrs:{small:""}},[e._v("delete")])],1):e._e()],1)})),1)],1):e._e(),e._v(" "),a("v-dialog",{attrs:{width:"700"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",{attrs:{elevation:"0",height:"600"}},[a("v-carousel",{attrs:{"hide-delimiter-background":"","delimiter-icon":"minus"},model:{value:e.indexImage,callback:function(t){e.indexImage=t},expression:"indexImage"}},e._l(e.imagesArray,(function(t,s){return a("v-carousel-item",{key:s,staticClass:"grey lighten-2",attrs:{src:"/uploads/images/"+t,"aspect-ratio":"1"},scopedSlots:e._u([{key:"placeholder",fn:function(){return[a("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[a("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)})})),1),e._v(" "),a("v-list",{attrs:{"two-line":""}},[e.userData?a("v-list-item",[a("v-list-item-avatar",[a("v-img",{staticClass:"grey lighten-2",attrs:{src:"/uploads/images/"+e.userData.image_profile,"aspect-ratio":"1"}})],1),e._v(" "),a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(e.userData.name))]),e._v(" "),a("v-list-item-subtitle",[e._v("Disponible")])],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-list-item-action",[a("v-btn",{staticClass:"ml-4",attrs:{color:"success"},on:{click:function(t){return e.redirectWhatsapp(e.userData.whatsapp)}}},[e._v("Whatsapp")])],1)],1):e._e()],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=u.exports}}]);